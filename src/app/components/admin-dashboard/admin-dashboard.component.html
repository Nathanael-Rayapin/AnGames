<div class="container-fluid h-100">
  <div class="row h-100">
    <div class="games-container d-flex justify-content-center flex-column">
      <!-- Actions -->
      <div class="action-button-container ms-auto">
        <button mat-raised-button (click)="addGame()" class="btn btn-success action-button" [disabled]="isUpdating">
          Add Game
        </button>
        <button mat-raised-button (click)="updateGames()" class="btn btn-primary action-button">
          Update Game
        </button>
        <button
            mat-raised-button
            (click)="removeGame()"
            class="btn btn-danger action-button">
          Remove Game
        </button>
      </div>

      <div class="table-container w-100 h-100 bg-white">
        <table mat-table [dataSource]="(games$ | async)" class="mat-elevation-z8 games-table w-100">
          <!-- Title -->
          <ng-container matColumnDef="title">
            <th mat-header-cell *matHeaderCellDef>Title</th>
            <td mat-cell *matCellDef="let element">
              <span *ngIf="element.title">{{ element.title }}</span>
              <input type="text" name="title" id="title" placeholder="Title"
              *ngIf="element.title === ''" [(ngModel)]="newTitle" class="form-control p-1">
            </td>
          </ng-container>

          <!-- Cover -->
          <ng-container matColumnDef="background_cover">
            <th mat-header-cell *matHeaderCellDef>Cover</th>
            <td mat-cell *matCellDef="let element">
              <img [src]="element.background_cover" alt="Cover" *ngIf="element.background_cover">
              <input type="text" name="background_cover" id="background_cover" placeholder="Cover_Url"
              *ngIf="element.background_cover === ''" [(ngModel)]="newCover" class="form-control p-1">
            </td>
          </ng-container>

          <!-- Description -->
          <ng-container matColumnDef="description">
            <th mat-header-cell *matHeaderCellDef>Description</th>
            <td mat-cell *matCellDef="let element">
              <span *ngIf="element.description">{{ element.description }}</span>
              <textarea name="description" id="description" cols="100" rows="3" placeholder="Description"
              *ngIf="element.description === ''" [(ngModel)]="newDescription" class="form-control p-1 my-2"></textarea>
            </td>
          </ng-container>

          <!-- Release_Date -->
          <ng-container matColumnDef="release_date">
            <th mat-header-cell *matHeaderCellDef>Release_Date</th>
            <td mat-cell *matCellDef="let element">
              <span *ngIf="element.release_date">{{ element.release_date }}</span>
              <input type="text" name="release_date" id="release_date" placeholder="Release_Date"
              *ngIf="element.release_date === ''" [(ngModel)]="newRelease" class="form-control p-1">
            </td>
          </ng-container>

          <!-- Theme-->
          <ng-container matColumnDef="main_theme">
            <th mat-header-cell *matHeaderCellDef>Theme</th>
            <td mat-cell *matCellDef="let element">
              <span *ngIf="element.main_theme">{{ element.main_theme }}</span>
              <input type="text" name="main_theme" id="main_theme" placeholder="Theme"
              *ngIf="element.main_theme === ''" [(ngModel)]="newTheme" class="form-control p-1">
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns" class="games-tr"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
      </div>


      <!-- Save -->
      <div class="action-button-container ms-auto">
        <button
            mat-raised-button
            [disabled]="!newCover || !newDescription || !newRelease"
            class="btn btn-success action-button"
            (click)="saveGame()">
          Save Games
        </button>
      </div>
    </div>
  </div>
</div>
